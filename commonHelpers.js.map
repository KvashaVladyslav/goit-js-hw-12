{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const BASE_ULR = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = BASE_ULR + END_POINT;\n\n  const params = {\n    key: '43020663-61586e43f3e56b8b813ab6c78',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import { lightbox, closeLoader } from '../main';\nimport { refs } from '../main';\n\nexport function renderGallery(array) {\n  if (array.length === 0) {\n    iziToast.warning({\n      color: 'orange',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    closeLoader();\n    form.reset();\n  } else {\n    const showGalleryArr = array\n      .map(arr => {\n        const {\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        } = arr;\n        return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <ul class=\"info-list\">\n          <li class=\"info-list-item\">\n            Likes\n            <p>${likes}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Views\n            <p>${views}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Comments\n            <p>${comments}</p>\n          </li>\n          <li class=\"info-list-item\">\n            Downloads\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n      })\n      .join('');\n\n    refs.gallery.insertAdjacentHTML('beforeend', showGalleryArr);\n\n    lightbox.refresh();\n  }\n  closeLoader();\n}\n","import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport const refs = {\n  formEl: document.querySelector('.form'),\n  searchBtn: document.querySelector('.search-btn'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n  loaderEl: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery'),\n  loaderBox: document.querySelector('.loader'),\n};\n\n// =================================================================\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nfunction showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction closeLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n  refs.loaderBox.classList.remove('visually-hidden');\n}\n\nexport function closeLoader() {\n  refs.loaderBox.classList.add('visually-hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    iziToast.success({\n      color: 'green',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    closeLoadMoreBtn();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nfunction myScroll() {\n  const height = refs.gallery.firstChild.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  query = e.target.elements.inputname.value.trim();\n  showLoader();\n  currentPage = 1;\n  if (query !== '') {\n    try {\n      const data = await getImages(query, currentPage);\n      maxPage = Math.ceil(data.totalHits / pageSize);\n      renderGallery(data.hits);\n    } catch {\n      iziToast.warning({\n        color: 'orange',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } else {\n    iziToast.info({\n      color: 'blue',\n      position: 'topRight',\n      message: 'Please, search some object',\n    });\n  }\n  closeLoader();\n  checkBtnStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await getImages(query, currentPage);\n    renderGallery(data.hits);\n  } catch {\n    iziToast.show({\n      color: 'red',\n      position: 'topRight',\n      message: 'Error',\n    });\n  }\n  checkBtnStatus();\n  closeLoader();\n  myScroll();\n}\n"],"names":["getImages","query","currentPage","url","params","axios","renderGallery","array","closeLoader","showGalleryArr","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","refs","lightbox","SimpleLightbox","maxPage","pageSize","showLoadMoreBtn","closeLoadMoreBtn","showLoader","checkBtnStatus","iziToast","myScroll","height","onFormSubmit","onLoadMoreClick","e","data"],"mappings":"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"}